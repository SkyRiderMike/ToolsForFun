All written in C++11 style